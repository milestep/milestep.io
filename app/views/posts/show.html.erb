<% provide(:og_title, @post.title)%>
<div class="blog-header">
  <%= render 'welcome/header' %>
</div>
<div class="blog-post-image-container">
  <%= render 'shared/blog_header' %>
  <div class="post-photo" style="background-image: url(<%= image_url @post.main_image.url %>)"></div>
  <div class="container post-main-container">
    <div class="row">
      <div class="created-date">
        <%= @post.formatted_created_date %>
      </div>
      <h1 class="title">
        <%= @post.title %>
      </h1>
    </div>
    <div class="row post-body">
      <%= raw(@post.body) %>
    </div>  
    <div id="disqus_thread"></div>
  </div>
<script>

    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    
    clearDisqusDiv();
    function clearDisqusDiv(){
      const div = document.querySelector("#disqus_thread");
      div.innerHTML = "";
    }

    var disqus_config = function () {
      let PAGE_URL = "<%= request.base_url %>" + "<%= request.original_fullpath %>"
      let PAGE_IDENTIFIER = "<%= @post.id %>"
      this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    

    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://https-milestep-io.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
</div>
<%= render 'welcome/footer' %>